{% extends "auctions/layout.html" %}

{% block body %}
    <h2>Active Listings</h2>
    <div class="sidebar col-lg-2 col-md-3">
      {% for category in categories %}
      <div>
          <a href="{% url 'activeListings'%}?category={{category.id}}">{{ category.category|upper }}</a>
      </div>
      {% endfor %}      
    </div>
    <div class="container">
      <div class="row">
        
            <div class="col-lg-12 d-flex align-items-stretch">
              <div class="card-deck">
              {% for listing in listings %}
                  <div class="card" style="width: 30rem;">
                      <img src="{{ listing.mainPicture.picture.url }}" class="card-img-top" alt="{{ listing.mainPicture.alt_text }}">
                      <div class="card-body">
                        <ul class="list-group list-group-flush">
                          <li class="list-group-item card-title"><h5> {{ listing.title }}</h5></li>
                          <li class="list-group-item card-text"><p>{{ listing.description }}</p></li>
                          <li class="list-group-item">$ 
                              {%if listing.currentBid %} 
                                {{ listing.currentBid }}
                              {% else %}  
                                {{ listing.startingBid }}
                              {% endif %}
                              </li>
                        </ul>
                      </div>
                      <div class="card-body">
                        <a href="{% url 'listing' listing.id %}" class="card-link">Take my bid!</a>
                        <a href="{% url 'change_watchlist' listing.id 'activeListings' %}" class="card-link">
                          {% if listing.is_watched %}
                              Remove from my watchlist
                          {% else %}
                              Add it to my watchlist
                          {% endif %}
                      </a>
                      </div>
                      </div>
                    </div>
              {% endfor %}
              </div>
            </div>
      </div>
    </div>
{% endblock %}